<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>20/10 ‚Äì ƒêi·ªÅu b·∫•t ng·ªù cho Em</title>
  <meta name="description" content="Trang web nh·ªè xinh ƒë·ªÉ ch√∫c m·ª´ng 20/10 ‚Äì d√†nh ri√™ng cho Em: ƒë·∫øm ng∆∞·ª£c, th∆∞ tay, b·ªô ·∫£nh k·ª∑ ni·ªám v√† ph·∫ßn b·∫≠t m√≠ qu√† t·∫∑ng."/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0f0f14;           /* n·ªÅn t·ªëi sang tr·ªçng */
      --card:#141823;         /* th·∫ª */
      --soft:#1b2030;         /* nh·∫•n */
      --text:#eef2ff;         /* ch·ªØ */
      --sub:#a9b4d0;          /* ph·ª• */
      --pink:#ff6ea9;         /* ƒëi·ªÉm h·ªìng */
      --violet:#8b5cf6;       /* t√≠m */
      --gold:#ffd166;         /* v√†ng */
    }
    *{box-sizing:border-box}
    html,body{height:100%;}
    body{
      margin:0; font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      color:var(--text); background: radial-gradient(1200px 800px at 10% -10%, #1e163f 0%, transparent 60%),
                         radial-gradient(1000px 600px at 110% 10%, #301a57 0%, transparent 60%),
                         var(--bg);
      overflow-x:hidden;
    }
    .container{max-width:1120px;margin:0 auto;padding:24px}
    header{position:relative;padding:48px 0 24px; text-align:center}
    .brand{font-family:"Playfair Display", serif; font-size:40px; letter-spacing:.5px}
    .brand span{background:linear-gradient(90deg,var(--pink),var(--violet));
      -webkit-background-clip:text; background-clip:text; color:transparent}
    .sub{color:var(--sub)}
    .tabs{display:flex;gap:12px;justify-content:center;margin:18px 0 0}
    .tab{padding:10px 16px;border:1px solid #2a2f45;border-radius:999px;cursor:pointer;
      background:linear-gradient(180deg,#171b28 0%, #0f1220 100%); color:var(--text);
      box-shadow:0 6px 20px rgba(0,0,0,.25); transition:.25s}
    .tab.active{border-color:var(--violet); box-shadow:0 0 0 2px rgba(139,92,246,.25) inset}

    /* hero */
    .hero{position:relative;border:1px solid #222740;background:linear-gradient(180deg,#141828,#0c0f1c);
      border-radius:24px;padding:28px;display:grid;grid-template-columns:1.2fr .8fr;gap:20px;align-items:center}
    @media (max-width:900px){.hero{grid-template-columns:1fr}}
    .hero h1{font-family:"Playfair Display",serif; font-size:44px; line-height:1.15;margin:0}
    .hero p{margin:10px 0 18px;color:var(--sub)}
    .cta-row{display:flex;gap:12px;flex-wrap:wrap}
    .btn{padding:12px 18px;border-radius:14px;border:1px solid #2b3050;cursor:pointer;font-weight:600;
      background:linear-gradient(180deg,#1a1f35,#11152a); color:var(--text); transition:.25s}
    .btn:hover{transform:translateY(-1px);}
    .btn.primary{border-color:transparent;background:linear-gradient(90deg,var(--pink),var(--violet)); color:#0c0c12}
    .badge{display:inline-flex;align-items:center;gap:8px;border:1px dashed #384062;color:#c9d3ff;
      padding:8px 12px;border-radius:999px;font-size:12px;margin-bottom:12px}
    .countdown{display:flex;gap:10px;flex-wrap:wrap}
    .timebox{background:#12162b;border:1px solid #2a2f45;border-radius:16px; padding:14px 16px;min-width:92px;text-align:center}
    .timebox .n{font-size:26px;font-weight:700}
    .illus{position:relative}
    .heart{position:absolute;inset:auto auto 16px 16px; font-weight:700; color:#111; background:linear-gradient(90deg,#ffd1e0,#ffe59e);
      padding:8px 12px;border-radius:12px}
    canvas#confetti{position:absolute; inset:0; pointer-events:none;}

    /* sections */
    section{margin-top:28px}
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:20px}
    .card{grid-column:span 12; background:linear-gradient(180deg,#151a2b,#0f1324);border:1px solid #232845;border-radius:20px;padding:18px}
    @media(min-width:900px){.span6{grid-column:span 6}}
    .card h3{margin:4px 0 8px;font-size:22px}
    .muted{color:var(--sub);font-size:14px}

    /* Letters */
    .letters{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:14px}
    .envelope{position:relative;border-radius:18px;padding:16px;border:1px solid #2a2f45;background:linear-gradient(180deg,#181d33,#0e1226);cursor:pointer;transition:.25s}
    .envelope:hover{transform:translateY(-3px)}
    .seal{position:absolute; right:14px; top:14px; background:linear-gradient(90deg,#ff9fc2,var(--pink)); color:#111; padding:5px 10px; border-radius:999px; font-size:12px; font-weight:700}
    .letter-text{display:none;margin-top:8px;line-height:1.6}
    .envelope.open .letter-text{display:block}

    /* Gallery */
    .gallery{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}
    .gallery img{width:100%; height:160px; object-fit:cover;border-radius:14px;border:1px solid #2a2f45}
    @media(max-width:800px){.gallery{grid-template-columns:repeat(2,1fr)}}

    /* Timeline */
    .timeline{display:grid;gap:12px}
    .step{display:grid;grid-template-columns:auto 1fr; gap:12px; align-items:start}
    .dot{width:12px;height:12px;border-radius:50%;background:linear-gradient(90deg,var(--pink),var(--violet));margin-top:7px}
    .plan{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}
    .pill{border:1px solid #384062;border-radius:999px;padding:6px 10px;font-size:12px;color:#c9d3ff}

    /* Reveal */
    .reveal{display:flex;flex-direction:column;gap:10px}
    .reveal-box{border:1px dashed #3a4264;border-radius:16px;padding:14px;background:linear-gradient(180deg,#13172b,#0e1222)}    .reveal-msg{font-size:18px}

    /* Modal Video */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:50}
    .modal.show{display:flex}
    .modal-backdrop{position:absolute;inset:0;background:rgba(6,8,20,.65);backdrop-filter:blur(3px)}
    .modal-dialog{position:relative;width:min(920px,92vw);background:linear-gradient(180deg,#13172b,#0e1222);border:1px solid #2b3150;border-radius:18px;padding:14px;box-shadow:0 20px 60px rgba(0,0,0,.45)}
    .modal-close{position:absolute;right:8px;top:8px;border:1px solid #3a4264;background:#151a2b;color:#cbd5ff;border-radius:10px;padding:6px 10px;cursor:pointer}
    .modal video{width:100%;max-height:80vh;object-fit:contain;border-radius:12px;border:1px solid #2b3150}

    /* Footer */
    footer{margin:36px 0;text-align:center;color:#9aa4c7}
    .tiny{font-size:12px}
    a.link{color:#cbb9ff;text-underline-offset:4px}
  </style>
</head>
<body>
  <canvas id="confetti"></canvas>
  <div class="container">
    <header>
      <div class="brand">20/10 ‚Äì <span>V·ª£ iu xinh ƒë·∫πp</span></div>
      <div class="sub">M·ªôt trang nh·ªè xinh ƒë·ªÉ g·ª≠i l·ªùi y√™u th∆∞∆°ng ƒë·∫øn <b>Em</b> üíê</div>
      <div class="tabs" role="tablist" aria-label="Ng∆∞·ªùi nh·∫≠n">
        <button class="tab active" data-target="em">üíñ Cho V·ª£ Tr∆∞∆°ng Th·ªã Ng·ªçc H√¢n c·ªßa anh</button>
      </div>
    </header>

    <section class="hero">
      <div>
        <div class="badge">20/10 ‚Äì Vi·ªát Nam Women's Day ‚Ä¢ <span id="today"></span></div>
  <h1 id="heroTitle">Em l√† m√≥n qu√† ng·ªçt ng√†o nh·∫•t!</h1>
  <p id="heroDesc">Trang nh·ªè n√†y d√†nh ri√™ng cho em ‚Äì c√≥ ƒë·∫øm ng∆∞·ª£c, th∆∞ t√¨nh mini v√† b√≠ m·∫≠t nho nh·ªè cho t·ªëi nay. 20/10 vui thi·ªát vui nh√©!</p>
        <div class="cta-row">
          <button class="btn primary" id="btnPlay">Ph√°t nh·∫°c n·ªÅn ‚ô™</button>
          <button class="btn" id="btnShare">Sao ch√©p link üìã</button>
        </div>
        <div style="height:12px"></div>
        <div class="countdown" aria-live="polite">
          <div class="timebox"><div class="n" id="dd">--</div><div>Ng√†y</div></div>
          <div class="timebox"><div class="n" id="hh">--</div><div>Gi·ªù</div></div>
          <div class="timebox"><div class="n" id="mm">--</div><div>Ph√∫t</div></div>
          <div class="timebox"><div class="n" id="ss">--</div><div>Gi√¢y</div></div>
        </div>
      </div>
      <div class="illus">
        <img alt="Hoa v√† √°nh ƒë√®n t√≠m" src="C:\Users\OS\Downloads\2010\images\anh01.jpg" style="width:100%;height:100%;object-fit:cover;border-radius:16px;border:1px solid #2a2f45"/>
        <div class="heart">20/10 ‚ô•</div>
      </div>
    </section>

    <section class="grid">
      <div class="card span6">
        <h3>Th∆∞ nh·ªè</h3>
        <div class="muted">Nh·∫•p ƒë·ªÉ m·ªü phong b√¨ ‚úâÔ∏è</div>
        <div class="letters" id="letters"></div>
      </div>
      <div class="card span6">
        <h3>B·ªô ·∫£nh k·ª∑ ni·ªám</h3>
        <div class="muted">Con heo h∆∞  <code> ƒê·∫ª 10 ƒë·ª©a cho anh</code></div>
        <div class="gallery" id="gallery">
          <img src="C:\Users\OS\Downloads\2010\images\4.jpg" alt="K·ª∑ ni·ªám 1">
          <img src="C:\Users\OS\Downloads\2010\images\3.jpg" alt="K·ª∑ ni·ªám 2">
          <img src="C:\Users\OS\Downloads\2010\images\2.jpg" alt="K·ª∑ ni·ªám 3">
          <img src="C:\Users\OS\Downloads\2010\images\1.jpg" alt="K·ª∑ ni·ªám 4">
        </div>
      </div>
    </section>

    <section class="grid">
      <div class="card span6">
        <h3>M·ªëc ƒë√°ng nh·ªõ</h3>
        <div class="timeline" id="timeline"></div>
      </div>
      <div class="card span6">
        <h3>B·∫≠t m√≠ b·∫•t ng·ªù üéÅ</h3>
        <div class="reveal">
          <div class="reveal-box">
            <div class="muted">Nh·∫•n n√∫t b√™n d∆∞·ªõi ƒë·ªÉ m·ªü</div>
            <div class="reveal-msg" id="revealMsg">(ƒêang kh√≥a‚Ä¶)</div>
          </div>
          <div class="plan">
            <button class="btn primary" id="btnReveal">M·ªü qu√† 1</button>
            <button class="btn primary" id="btnReveal2">M·ªü qu√† 2</button>
            <button class="btn primary" id="btnReveal3">M·ªü qu√† 3</button>
            <button class="btn" id="btnLock">Kh√≥a l·∫°i</button>
          </div>
          <div class="muted tiny">ƒêi nh√¨ ng·∫£ anh c√≥ l·ªùi n√≥i nh·ªè</div>
        </div>
      </div>
    </section>

    <footer>
      <div>Made with ‚ô• Ng·ªçc H√¢n <b>Ch·ªìng iu c·ªßa em Nguy·ªÖn D≈©ng</b></div>
      <div class="tiny">Deginer: Nguy·ªÖn T·∫•n D≈©ng
      </div>
    </footer>
  </div>

  <!-- Modal Video Surprise -->
  <div id="videoModal" class="modal" role="dialog" aria-modal="true" aria-label="Video b·∫•t ng·ªù 20/10">
    <div class="modal-backdrop" id="backdrop"></div>
    <div class="modal-dialog">
      <button class="modal-close" id="closeModal" aria-label="ƒê√≥ng">‚úï</button>
      <video id="surpriseVideo" controls playsinline>
        <source id="surpriseSource" src="" type="video/mp4" />
        Tr√¨nh duy·ªát c·ªßa b·∫°n kh√¥ng h·ªó tr·ª£ video.
      </video>
    </div>
  </div>

  <audio id="bgm" preload="auto">
    <!-- File nh·∫°c n·ªÅn -->
    <source id="bgmSource" src="audio/nhacnen.mp3" type="audio/mpeg" />
    <source id="bgmSource2" src="audio/nhacnen2.mp3" type="audio/mpeg" />
  </audio>

  <script>
    // ======= State cho 2 ng∆∞·ªùi nh·∫≠n =======
    const DATA = {
      em: {
        title: "Em l√† m√≥n qu√† ng·ªçt ng√†o nh·∫•t!",
        desc: "Trang nh·ªè n√†y d√†nh ri√™ng cho em ‚Äì c√≥ ƒë·∫øm ng∆∞·ª£c, th∆∞ t√¨nh mini v√† b√≠ m·∫≠t nho nh·ªè cho t·ªëi nay. 20/10 vui thi·ªát vui nh√©!",
        letters: [
          {title:"Th·∫ßm th√¨", text:"C·∫£m ∆°n em v√¨ ƒë√£ ƒë·∫øn, ·ªü l·∫°i v√† l√†m ng√†y c·ªßa anh r·ª±c r·ª°. Ch√∫c v·ª£ iu c·ªßa anh vui v·∫ª!"},
          {title:"K·ª∑ ni·ªám", text:"Em c√≤n nh·ªõ l·∫ßn ƒë·∫ßu m√¨nh ch∆°i l·ª≠a ch√πa kh√¥ng? T·ª´ ƒë√≥ m·ªói kho·∫£nh kh·∫Øc anh ƒë·ªÅu nh·ªõ v·ªÅ v·ª£."},
          {title:"H·ª©a h·∫πn", text:"Anh h·ª©a s·∫Ω l·∫Øng nghe, s·∫ª chia v√† nh·ªØng chuy·ªán em th·∫•y vui v√† bu·ªìn."}
        ],
        timeline: [
          {when:"Sau gi·ªù l√†m", what:"ƒê√≥n v·ª£ v·ªÅ nh√†"},
          {when:"21h50", what:"Ch·ªü v·ª£ ƒëi ƒÉn, ƒëi ch∆°i"},
          {when:"23h00", what:"Hai ƒë·ª©a m√¨nh ƒëi xem phim r·ªìi ƒëi nh√† ngh·ªâ üòâ"}
        ],
        reveal: "21h30 t·ªëi nay ‚Äì Hai v·ª£ ch·ªìng <b>Caf√© Ng·∫Øm Ph·ªë</b> b√†n c·∫°nh c·ª≠a k√≠nh. C√≥ m·ªôt m√≥n qu√† nh·ªè cho v·ª£",
        reveal2: "B·∫•t ng·ªù th·ª© hai d√†nh cho em...",
        video: "media/vo-iu.mp4",
        video2: "media/vo-iu2.mp4",
        video3: "media/vo-iu3.mp4"
      }
    }

    // ======= Helper =======
    window.addEventListener('load', function() {
      // Initialize
      const todayEl = document.getElementById('today');
      const heroTitle = document.getElementById('heroTitle');
      const heroDesc = document.getElementById('heroDesc');
      const lettersWrap = document.getElementById('letters');
      const timelineWrap = document.getElementById('timeline');
      const revealMsg = document.getElementById('revealMsg');
      const btnReveal = document.getElementById('btnReveal');
      const btnReveal2 = document.getElementById('btnReveal2');
      const btnLock = document.getElementById('btnLock');
      const btnPlay = document.getElementById('btnPlay');
      const btnShare = document.getElementById('btnShare');
      const btnConfetti = document.getElementById('btnConfetti');
      
      // Set today's date
      todayEl.textContent = new Date().toLocaleDateString('vi-VN', {
        weekday:'long', 
        day:'2-digit', 
        month:'2-digit', 
        year:'numeric'
      });

      // Render initial content
      const d = DATA.em;
      heroTitle.textContent = d.title;
      heroDesc.textContent = d.desc;

      // Render letters
      lettersWrap.innerHTML = d.letters.map(it => `
        <div class="envelope" role="button" aria-expanded="false">
          <div class="seal">M·ªü th∆∞</div>
          <div><b>${it.title}</b></div>
          <div class="letter-text">${it.text}</div>
        </div>
      `).join('');

      // Render timeline
      timelineWrap.innerHTML = d.timeline.map(it => `
        <div class="step">
          <div class="dot"></div>
          <div><b>${it.when}</b><div class="muted">${it.what}</div></div>
        </div>
      `).join('');

      // Bind envelope clicks
      document.querySelectorAll('#letters .envelope').forEach(el => {
        el.addEventListener('click', function() {
          this.classList.toggle('open');
          this.setAttribute('aria-expanded', this.classList.contains('open'));
          burstConfetti();
        });
      });

      // Bind reveal buttons
      btnReveal.addEventListener('click', function() {
        revealMsg.innerHTML = d.reveal;
        if (d.video) {
          surpriseSource.src = d.video;
          surpriseVideo.load();
          openModal();
          surpriseVideo.play().catch(() => {});
        }
        burstConfetti();
      });

      btnReveal2.addEventListener('click', function() {
        if (d.reveal2) {
          revealMsg.innerHTML = d.reveal2;
        }
        if (d.video2) {
          surpriseSource.src = d.video2;
          surpriseVideo.load();
          openModal();
          surpriseVideo.play().catch(() => {});
        }
        burstConfetti();
      });

      const btnReveal3 = document.getElementById('btnReveal3');
      btnReveal3.addEventListener('click', function() {
        if (d.reveal3) {
          revealMsg.innerHTML = d.reveal3;
        }
        if (d.video3) {
          surpriseSource.src = d.video3;
          surpriseVideo.load();
          openModal();
          surpriseVideo.play().catch(() => {});
        }
        burstConfetti();
      });

      btnLock.addEventListener('click', function() {
        revealMsg.textContent = '(ƒêang kh√≥a‚Ä¶)';
        closeModal();
      });

      // Share button
      btnShare.addEventListener('click', async function() {
        try {
          await navigator.clipboard.writeText(location.href);
          toast('ƒê√£ sao ch√©p link!');
        } catch(e) {
          toast('Kh√¥ng sao ch√©p ƒë∆∞·ª£c, h√£y t·ª± copy URL.');
        }
      });

      // Confetti button
      btnConfetti.addEventListener('click', burstConfetti);
    });

    // ======= ƒê·∫øm ng∆∞·ª£c ƒë·∫øn 20/10 =======
    function next2010(){
      const now = new Date();
      let y = now.getFullYear();
      const target = new Date(y, 9, 20, 0, 0, 0); // Th√°ng 9 = October
      if(now > target) return new Date(y+1, 9, 20, 0, 0, 0);
      return target;
    }
    const targetTime = next2010();
    const dd=document.getElementById('dd');
    const hh=document.getElementById('hh');
    const mm=document.getElementById('mm');
    const ss=document.getElementById('ss');
    setInterval(()=>{
      const now = new Date();
      let s = Math.max(0, Math.floor((targetTime - now)/1000));
      const d = Math.floor(s/86400); s-=d*86400;
      const h = Math.floor(s/3600);  s-=h*3600;
      const m = Math.floor(s/60);    s-=m*60;
      dd.textContent=d; hh.textContent=h; mm.textContent=m; ss.textContent=s;
    },1000);

    // ======= Reveal box =======
    const modal = document.getElementById('videoModal');
    const backdrop = document.getElementById('backdrop');
    const closeModalBtn = document.getElementById('closeModal');
    const surpriseVideo = document.getElementById('surpriseVideo');
    const surpriseSource = document.getElementById('surpriseSource');

    // Video error handler -> show toast and log details when video fails to load/play
    surpriseVideo.addEventListener('error', () => {
      console.error('Video failed to load/play', surpriseVideo.error);
      toast('L·ªói: video kh√¥ng t·∫£i ƒë∆∞·ª£c. Ki·ªÉm tra ƒë∆∞·ªùng d·∫´n v√† m·ªü console ƒë·ªÉ bi·∫øt chi ti·∫øt.');
    });

    function openModal(){ modal.classList.add('show'); }
    function closeModal(){ modal.classList.remove('show'); try{ surpriseVideo.pause(); }catch(e){} }
    backdrop.addEventListener('click', closeModal);
    closeModalBtn.addEventListener('click', closeModal);
    window.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeModal(); });

    
    document.getElementById('btnReveal').addEventListener('click', ()=>{
      const active = document.querySelector('.tab.active').dataset.target;
      revealMsg.innerHTML = DATA[active].reveal;
      if (DATA[active].video){
        surpriseSource.src = DATA[active].video;
        surpriseVideo.load();
        openModal();
        surpriseVideo.play().catch(()=>{});
      } else {
        toast('Ch∆∞a c·∫•u h√¨nh video cho m·ª•c n√†y.');
      }
      burstConfetti();
    });

    document.getElementById('btnReveal2').addEventListener('click', ()=>{
      const active = document.querySelector('.tab.active').dataset.target;
      if (DATA[active].reveal2) {
        revealMsg.innerHTML = DATA[active].reveal2;
      }
      if (DATA[active].video2){
        surpriseSource.src = DATA[active].video2;
        surpriseVideo.load();
        openModal();
        surpriseVideo.play().catch(()=>{});
      } else {
        toast('Ch∆∞a c·∫•u h√¨nh video th·ª© hai.');
      }
      burstConfetti();
    });
    document.getElementById('btnLock').addEventListener('click', ()=>{
      revealMsg.textContent = '(ƒêang kh√≥a‚Ä¶)';
      closeModal();
    });

    // ======= Music Control =======
    window.addEventListener('load', function() {
      const audio = document.getElementById('bgm');
      const btnPlay = document.getElementById('btnPlay');
      let playing = false;
      let currentTrack = 1;
      const tracks = [
        'audio/nhacnen.mp3',
        'audio/nhacnen2.mp3'
      ];

      // Load audio once on page load
      try {
        audio.load();
        audio.volume = 0.5; // Set volume to 50%
      } catch (err) {
        console.error('Audio load error:', err);
      }

      function playNextTrack() {
        currentTrack = (currentTrack + 1) % tracks.length;
        audio.src = tracks[currentTrack];
        audio.load();
        audio.play().then(() => {
          playing = true;
          btnPlay.textContent = 'T·∫°m d·ª´ng ‚ô™';
        }).catch(error => {
          console.error('Cannot play next track:', error);
          toast('Kh√¥ng th·ªÉ ph√°t b√†i ti·∫øp theo');
        });
      }

      audio.addEventListener('error', function(e) {
        console.error('Audio error:', e);
        toast('Kh√¥ng t√¨m th·∫•y file nh·∫°c. Ki·ªÉm tra th∆∞ m·ª•c audio/');
      });

      btnPlay.addEventListener('click', async function() {
        try {
          if (playing) {
            await audio.pause();
            playing = false;
            btnPlay.textContent = 'Ph√°t nh·∫°c n·ªÅn ‚ô™';
          } else {
            try {
              // Ensure we're using the current track
              audio.src = tracks[currentTrack];
              audio.load();
              await audio.play();
              playing = true;
              btnPlay.textContent = 'T·∫°m d·ª´ng ‚ô™';
            } catch (playError) {
              console.error('Audio play failed:', playError);
              if (playError.name === 'NotAllowedError') {
                toast('Vui l√≤ng b·∫≠t quy·ªÅn ph√°t nh·∫°c tr√™n tr√¨nh duy·ªát');
              } else if (playError.name === 'NotFoundError') {
                toast('Kh√¥ng t√¨m th·∫•y file nh·∫°c trong th∆∞ m·ª•c audio/');
              } else {
                toast('L·ªói ph√°t nh·∫°c: ' + playError.message);
              }
            }
          }
        } catch (err) {
          console.error('Audio control error:', err);
          toast('L·ªói ƒëi·ªÅu khi·ªÉn audio: ' + err.message);
        }
      });

      // Handle audio end - play next track automatically
      audio.addEventListener('ended', function() {
        playNextTrack();
      });
    });

    // ======= Mini toast =======
    function toast(msg){
      const el = document.createElement('div');
      el.textContent = msg;
      el.style.position='fixed'; el.style.bottom='18px'; el.style.left='50%'; el.style.transform='translateX(-50%)';
      el.style.background='linear-gradient(90deg,var(--pink),var(--violet))';
      el.style.color='#0f0f14'; el.style.padding='10px 14px'; el.style.borderRadius='999px'; el.style.fontWeight='700'; el.style.zIndex=9;
      document.body.appendChild(el); setTimeout(()=> el.remove(), 1800);
    }

    // ======= Confetti ƒë∆°n gi·∫£n =======
    const cvs = document.getElementById('confetti');
    const ctx = cvs.getContext('2d');
    let W,H; function resize(){ W=window.innerWidth; H=window.innerHeight; cvs.width=W; cvs.height=H; }
    window.addEventListener('resize', resize); resize();

    const pieces = [];
    let lastSpawnTime = 0;
    
    function spawnHeart() {
      const now = Date.now();
      // T·∫°o tim m·ªõi m·ªói 100ms v√† t·∫°o nhi·ªÅu tim c√πng l√∫c
      if (now - lastSpawnTime > 100) {
        // T·∫°o 3 tim c√πng l√∫c ·ªü c√°c v·ªã tr√≠ kh√°c nhau
        for(let i = 0; i < 3; i++) {
          pieces.push({
            x: (i * W/3) + Math.random()*(W/3), // Ph√¢n b·ªë ƒë·ªÅu theo chi·ªÅu ngang
            y: H + 10, // B·∫Øt ƒë·∫ßu t·ª´ d∆∞·ªõi m√†n h√¨nh
            s: 8+Math.random()*8, // Tim to h∆°n (g·∫•p ƒë√¥i k√≠ch th∆∞·ªõc)
            vx: -0.8+Math.random()*1.6, // Di chuy·ªÉn ƒëa d·∫°ng h∆°n
            vy: -1.2-Math.random()*0.8, // Bay l√™n v·ªõi t·ªëc ƒë·ªô kh√°c nhau
            a: Math.random()*Math.PI,
            life: 250+Math.random()*150, // S·ªëng l√¢u h∆°n m·ªôt ch√∫t
            color: Math.random() > 0.5 ? '#ff6ea9' : '#ff9fc2',
            scale: 0.8 + Math.random()*0.4 // Th√™m hi·ªáu ·ª©ng co gi√£n
          });
        }
        lastSpawnTime = now;
      }
    }

    // T·∫°o hi·ªáu ·ª©ng b√πng n·ªï tim
    function burstConfetti(){
      for(let i=0;i<50;i++){ // TƒÉng s·ªë l∆∞·ª£ng tim trong hi·ªáu ·ª©ng b√πng n·ªï
        pieces.push({
          x: W/2 + (Math.random()-0.5)*W/2, // T·∫≠p trung h∆°n v√†o gi·ªØa m√†n h√¨nh
          y: H/2 + (Math.random()-0.5)*H/3,
          s: 8+Math.random()*8, // Tim to h∆°n
          vx: -3+Math.random()*6, // T·ªëc ƒë·ªô bay ngang ƒëa d·∫°ng h∆°n
          vy: -4-Math.random()*2, // Bay l√™n cao h∆°n
          a: Math.random()*Math.PI*2,
          life: 200+Math.random()*150,
          color: Math.random() > 0.5 ? '#ff6ea9' : '#ff9fc2',
          scale: 0.8 + Math.random()*0.6 // Th√™m hi·ªáu ·ª©ng co gi√£n
        });
      }
    }

    function drawHeart(ctx, x, y, size) {
      ctx.beginPath();
      ctx.moveTo(x, y + size / 4);
      ctx.quadraticCurveTo(x, y, x + size / 4, y);
      ctx.quadraticCurveTo(x + size / 2, y, x + size / 2, y + size / 4);
      ctx.quadraticCurveTo(x + size / 2, y, x + size * 3/4, y);
      ctx.quadraticCurveTo(x + size, y, x + size, y + size / 4);
      ctx.quadraticCurveTo(x + size, y + size / 2, x + size / 2, y + size * 3/4);
      ctx.quadraticCurveTo(x, y + size / 2, x, y + size / 4);
      ctx.fill();
    }

    function tick(){
      ctx.clearRect(0,0,W,H);
      
      // T·∫°o tim m·ªõi bay l√™n
      spawnHeart();
      
      for(let i=pieces.length-1;i>=0;i--){
        const p = pieces[i];
        p.x += p.vx;
        p.y += p.vy;
        p.a += 0.02;
        // Th√™m hi·ªáu ·ª©ng chuy·ªÉn ƒë·ªông sin wave nh·∫π
        p.x += Math.sin(p.life/20) * 0.5;
        p.life--;
        
        // T√≠nh to√°n scale theo th·ªùi gian s·ªëng
        const scale = p.scale * (1 + Math.sin(p.life/15) * 0.1); // Hi·ªáu ·ª©ng ƒë·∫≠p nh·∫π
        
        ctx.save();
        ctx.translate(p.x,p.y);
        ctx.rotate(p.a);
        ctx.scale(scale, scale);
        ctx.fillStyle = p.color;
        ctx.globalAlpha = Math.min(1, p.life/100);
        drawHeart(ctx, -p.s, -p.s, p.s*2);
        ctx.restore();
        
        // X√≥a tim khi bay ra kh·ªèi m√†n h√¨nh ho·∫∑c h·∫øt th·ªùi gian s·ªëng
        if(p.y < -20 || p.y > H+20 || p.life<=0) pieces.splice(i,1);
      }
      requestAnimationFrame(tick);
    }
    tick();
  </script>
</body>
</html>
